#####################
##  Caliph events  ##
#####################

namespace = cal_flavor

######################
##  Message events  ##
######################

country_event = {#event telling all other nations of the wargoal against the caliph
	id = cal_flavor.1
	title = cal_flavor.1.t
	desc = cal_flavor.1.d
	picture = HAJJ_eventPicture

	is_triggered_only = yes

	major = yes

	option = {
		name = cal_flavor.1.a
	}
}

country_event = {#event telling all other nations of the wargoal against new wargoal
	id = cal_flavor.2
	title = cal_flavor.2.t
	desc = cal_flavor.2.d
	picture = RELIGIOUS_WARS_eventPicture

	is_triggered_only = yes

	major = yes

	option = {
		name = cal_flavor.2.a
	}
}

country_event = {#caliphate destroyed by nation
	id = cal_flavor.3
	title = cal_flavor.3.t
	desc = cal_flavor.3.d
	picture = RELIGIOUS_WARS_eventPicture

	is_triggered_only = yes

	major = yes

	option = {
		name = cal_flavor.3.a
	}
}

country_event = {#caliphate from inside
	id = cal_flavor.4
	title = cal_flavor.4.t
	desc = cal_flavor.4.d
	picture = RELIGIOUS_TURMOIL_eventPicture

	is_triggered_only = yes

	major = yes

	option = {
		name = cal_flavor.4.a
	}
}

####################
## flavor events  ##
####################

country_event = {#unify islam
	id = cal_flavor.5
	title = cal_flavor.5.t
	desc = cal_flavor.5.d
	picture = HAJJ_eventPicture

	is_triggered_only = yes

	major = yes

	option = {#islamic state
		name = cal_flavor.5.a
		change_tag = ISS
		if = {
			limit = { has_custom_ideas = no }
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		remove_non_electors_emperors_from_empire_effect = yes

		if = {
			limit = {
				NOT = { government = monarchy }
			}
			change_government_to_monarchy = yes
		}
		add_government_reform = cal_caliphate_reform

		add_country_modifier = {
			name = cal_islamic_state
			duration = -1
		}
		every_country = {
			limit = {
				NOT = { religion_group = muslim }
			}
			reverse_add_opinion = {
				who = THIS
				modifier = cal_islamic_state_opinion
			}
		}
	}

	option = {#moderate caliphate
		name = cal_flavor.5.b
		if = {
			limit = {
				NOT = { government = monarchy }
			}
			change_government_to_monarchy = yes
		}
		add_government_reform = cal_caliphate_reform

		add_country_modifier = {
			name = cal_moderate_caliphate
			duration = -1
		}
	}
	option = {#protector
		name = cal_flavor.5.c

		add_country_modifier = {
			name = cal_protector_caliphate
			duration = -1
		}
		every_country = {
			limit = {
				religion_group = muslim
			}
			reverse_add_opinion = {
				who = THIS
				modifier = cal_protector_opinion
			}
		}
	}
}
